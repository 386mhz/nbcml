<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newmarket Basketball Club - Men's League</title>
    <meta name="description" content="Newmarket Community Men's 30+ League - Recreational basketball league in Newmarket featuring competitive play, organized schedules, and detailed statistics.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preload" href="style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="style.css"></noscript>
    <link rel="icon" type="image/png" href="favicon.png">
    <script src="scripts/rosterLoader.js"></script>
    <script src="scripts/scripts.js" defer></script>
    <script src="https://kit.fontawesome.com/your-kit-code.js" defer crossorigin="anonymous"></script>
    
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>
                <img src="images/NBCML_logo_blue_rnd.png" alt="NBCML" class="header-logo">
                <span>Newmarket Basketball Club Men's League</span>
                <img src="images/NBCML_logo_blue_rnd.png" alt="NBCML" class="header-logo">
            </h1>
            <p>NBCML - 25/26 Season</p>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('main')">
				<i class="fas fa-home"></i> Main
			</button>
			<button class="nav-tab" onclick="showSection('schedule')">
				<i class="fas fa-calendar-alt"></i> Schedule
			</button>
            <button class="nav-tab" onclick="showSection('standings')">
                <i class="fa-solid fa-medal"></i> Standings
            </button>
			<button class="nav-tab" onclick="showSection('rules')">
				<i class="fas fa-gavel"></i> Rules
			</button>
			<button class="nav-tab" onclick="showSection('rosters')">
				<i class="fas fa-users"></i> Rosters
			</button>
			<button class="nav-tab" onclick="showSection('team-scoring')">
				<i class="fas fa-chart-bar"></i> Team Stats
			</button>
			<button class="nav-tab" onclick="showSection('individual-scoring')">
				<i class="fas fa-star"></i> Player Stats
			</button>
            <button class="nav-tab" id="preSeasonTab" style="display:none;" onclick="showSection('preSeason')">
                <i class="fa-solid fa-dumbbell"></i> Pre-Season
            </button>
            <button class="nav-tab" id="playoffsTab" style="display:none;" onclick="showSection('playoffs')">
                <i class="fas fa-trophy"></i> Playoffs
            </button>
			<button class="nav-tab" id="adminTab" style="display: none;" onclick="showSection('admin')">
                <i class="fas fa-cog"></i> Admin
            </button>
  
        </div>

		<!-- Scrolling Results Section -->
		<div class="results-scroller">
			<button class="scroll-arrow scroll-left" onclick="scrollResults('left')">
				<i class="fas fa-chevron-left"></i>
			</button>
			
			<div class="results-viewport">
				<div class="results-container" id="resultsContainer">
					<!-- Results will be populated by JavaScript -->
				</div>
			</div>
			
			<button class="scroll-arrow scroll-right" onclick="scrollResults('right')">
				<i class="fas fa-chevron-right"></i>
			</button>
		</div>

        <!-- Main Section -->
        <div id="main" class="content-section active">
            <!-- Executives Card -->
            <div class="card">
                <h2><i class="fas fa-users"></i> NBCML Executive Team</h2>
                <div class="executive-team">
                    <ul class="player-list">
                        <li class="captain"><i class="fas fa-crown"></i> Steve Harrison <span class="captain-badge">EXECUTIVE</span></li>
                        <li class="captain"><i class="fas fa-crown"></i> Jeff Smith <span class="captain-badge">EXECUTIVE</span></li>
                        <li class="captain"><i class="fas fa-crown"></i> Colin Andruniak <span class="captain-badge">EXECUTIVE</span></li>
                    </ul>
                </div>

                <h2><i class="fas fa-comments"></i> NBCML Complaints Department</h2>
                <div class="executive-team">
                    <ul class="player-list">
                        <li class="captain complaints-highlight">ðŸŽ­ Petar Rafajlovic ðŸŽ­ <span class="captain-badge">COMPLAINTS</span></li>
                    </ul>
                </div>
            </div>

            <!-- Venue Card -->
            <div class="card">
                <h2><i class="fas fa-building"></i> Magna Centre</h2>
                <h2 style="font-size: 1.2rem; color: var(--text-secondary); margin-top: 5px;">Home of the NBCML since 2007</h2>
                <div class="executive-team">
                    <ul class="player-list">
                        <li class="captain">
                            <a href="http://maps.newmarket.ca/tour_Magna.html" target="_blank" class="magna-tour-btn">
                                <i class="fas fa-video"></i> Take a 3D Virtual Tour Of The Magna Centre
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="map-container" style="margin-top: 20px;">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2873.0122597461096!2d-79.45801372346546!3d43.95651897107605!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x882ad295b4dc4177%3A0x4266a2667b8500eb!2s800%20Mulock%20Dr%2C%20Newmarket%2C%20ON%20L3Y%209C1!5e0!3m2!1sen!2sca!4v1686157433646!5m2!1sen!2sca"
                        width="100%" 
                        height="300px" 
                        style="border:0; border-radius: 10px;" 
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
            </div>
        </div>
		
		<!-- Schedule Section -->
		<div id="schedule" class="content-section">
			<h2><i class="fas fa-calendar-alt"></i> Full Season Schedule</h2>
			<table class="schedule-table">
				<thead>
					<tr>
						<th>Week</th>
						<th>Date</th>
						<th>Early Game - 6:30</th>
						<th>Middle Game - 7:40</th>
						<th>Late Game - 8:50</th>
						<th>Scoresheets</th>
					</tr>
					<tr class="scorekeeper-header">
						<th></th>
						<th></th>
						<th>Scorekeepers</th>
						<th>Scorekeepers</th>
						<th>Scorekeepers</th>
						<th></th>
					</tr>
				</thead>
				<tbody id="fullScheduleBody">
					<!-- Filled by JavaScript -->
				</tbody>
			</table>
		</div>

        <!-- Standings Section -->
        <div id="standings" class="content-section">
            <h2><i class="fas fa-list-ol"></i> Team Standings</h2>
            <table id="standingsTable" class="standings-table">
    <thead>
        <tr>
            <th>Pos</th>
            <th>Team</th>
            <th>W</th>
            <th>L</th>
            <th>T</th>
            <th>PF</th>
            <th>PA</th>
            <th>Pts</th>
            <th>GB</th>
            <th>Home</th>  <!-- New column -->
            <th>Away</th>  <!-- New column -->
            <th>Streak</th>
        </tr>
    </thead>
    <tbody id="standingsBody"></tbody>
</table>
        </div>
		
		<!-- Rules Section -->
		<div id="rules" class="content-section">
    <div class="card-base">
        <section class="nbcml-rules">
            <h2><i class="fas fa-gavel"></i> NBCML Official Rules</h2>

            <h3>General Game Rules (FIBA-Based)</h3>
            <ul>
                <li>28-minute halves (running time).</li>
                <li>Last 2 minutes: clock stops on whistle or made basket.</li>
                <li>Two 1-minute timeouts per game; can be called anytime.</li>
                <li>Halftime: 1â€“5 minutes based on gym timing.</li>
                <li>Double bonus on 8th foul. In final 2 minutes, next foul moves count to 6 if under.</li>
                <li>Free throw key entry on release (FIBA 43.2.4).</li>
                <li>Clock stops for timeouts, injuries, confusion, or technicals.</li>
                <li>2:00 or less: after timeout, team may choose frontcourt/backcourt restart (FIBA 17.2.4).</li>
                <li>No timeout allowed for scoring team under 2:00 unless officials stop play (FIBA 18.2.8).</li>
            </ul>

            <h3>Overtime</h3>
            <ul>
                <li>3-minute OT with stop time in last 2 minutes.</li>
                <li>1 timeout per team (no carryovers).</li>
                <li>Game ends in tie if still tied after OTâ€”except playoffs, where OT repeats until winner.</li>
            </ul>

            <h3>Team Size and Pickup Players</h3>
            <ul>
                <li>Teams can pick up 1 player if they only have 4 players; game counts but is a forfeit.</li>
                <li>4-on-4 allowed if both teams agree; fewer than 4 = no game.</li>
                <li>Pickup players must sit when roster players arrive.</li>
                <li>Captains should use judgment to keep games competitive.</li>
                <li>Playoffs: must have 5 roster players. No pickups unless team forfeits intentionally.</li>
                <li>All players must sub off at least once per half if roster exceeds 5.</li>
                <li>Miss over half the season = possible playoff ineligibility or future waitlist.</li>
                <li>Trade deadline is after first round robin unless exceptional case.</li>
            </ul>

            <h3>Jerseys</h3>
            <ul>
                <li>Players must wear current season official numbered jersey.</li>
                <li>Unofficial jerseys = 2 free throws awarded to opponent pre-game.</li>
                <li>Temporary solutions (e.g. taped-on numbers) are acceptable with notice to refs.</li>
            </ul>

            <h3>Scorekeeping</h3>
            <ul>
                <li>Assigned players must keep score or find a replacement.</li>
                <li>Team loses 2 points in standings for failing to provide a scorekeeper.</li>
                <li>No-show scorekeepers = 1 game suspension.</li>
            </ul>

            <h3>Technical Fouls</h3>
            <ul>
                <li>2 technicals or 1 flagrant = ejection + possible suspension.</li>
                <li>Ref write-ups = 2-game suspension minimum, possible additional sanctions.</li>
            </ul>

            <h3>Playoff Format</h3>
            <p><strong>Week 1:</strong></p>
            <ul>
                <li>Game 1: Seed 1 vs 2 (non-elimination)</li>
                <li>Game 2: Seed 4 vs 5 (elimination)</li>
                <li>Game 3: Seed 3 vs 6 (elimination)</li>
            </ul>
            <p><strong>Week 2:</strong></p>
            <ul>
                <li>Game 1: Seed 1 vs lowest seed from Week 1 winners</li>
                <li>Game 2: Seed 2 vs other Week 1 winner</li>
                <li>Winners advance to Final</li>
            </ul>
            <p><strong>Week 3:</strong> Championship Final</p>

            <h3>Playoff Seeding Tiebreakers</h3>
            <ol>
                <li>Total points</li>
                <li>Total wins</li>
                <li>Head-to-head wins</li>
                <li>Head-to-head most points scored</li>
                <li>Executive decision</li>
            </ol>

            <p><strong>Note:</strong> The League Executive has final authority on all rules and may adjust suspensions or penalties as needed.</p>

            <!-- PDF Link at bottom -->
            <div class="rules-pdf-link">
                <a href="NBCML Rules.pdf" target="_blank" class="btn">
                    <i class="fas fa-file-pdf"></i> Download Complete NBCML Rules
                </a>
            </div>
        </section>
    </div>
</div>

		<!-- Rosters Section -->
		<div id="rosters" class="content-section">
			<h2><i class="fas fa-users"></i> Team Rosters</h2>
			<div id="rostersContainer">
				<!-- Rosters will be populated by JavaScript -->
			</div>
		</div>

		<!-- Team Scoring Section -->
		<div id="team-scoring" class="content-section">
			<h2><i class="fas fa-chart-bar"></i> Team Statistics</h2>
			<div id="teamScoringContainer"></div>
		</div>

		<!-- Individual Scoring Section -->
		<div id="individual-scoring" class="content-section">
    <h2><i class="fas fa-star"></i> Player Stats</h2>
    <div class="sort-controls">
        <button class="sort-btn active" data-sort="ppg">Points Per Game</button>
        <button class="sort-btn" data-sort="fpg">Fouls Per Game</button>
        <button class="sort-btn" data-sort="tpg">Techs Per Game</button>
    </div>
    <div id="individualScoringContainer" class="player-stats-columns">
        <!-- Columns will be populated by JavaScript -->
    </div>
</div>		

        <!-- Admin Section -->
        <div id="admin" class="content-section">
            <div class="admin-panel">
                <div class="admin-form">
                    <h3>Season Management</h3>
                    <div class="form-group">
                        <label class="toggle-control">
                            <input type="checkbox" id="playoffsToggle">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Show Playoffs Tab</span>
                        </label>
                        <label class="toggle-control">
                            <input type="checkbox" id="preSeasonToggle">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Show Pre-Season Tab</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pre-Season Section -->
            <div id="preSeason" class="content-section">
                <div class="card-base">
                    <h2><i class="fa-solid fa-dumbbell"></i> Pre-Season Games</h2>
                    
                    <div class="preseason-note">
                        <h3>Why Pre-Season Games Matter</h3>
                        <p>Players are assigned specific time slots to help us create balanced and competitive teams for the upcoming season. These evaluation games allow us to:</p>
                        <ul>
                            <li>Evaluate player skills and playing style</li>
                            <li>Determine natural positions and preferences</li>
                            <li>Create opportunities for players to meet and connect</li>
                            <li>Build teams with balanced talent levels</li>
                            <li>Ensure season-long competitive parity</li>
                        </ul>
                    </div>

                    <div class="arrival-note">
                        <i class="fas fa-clock"></i>
                        <span>Please arrive 15 minutes before your designated time slot for check-in and warm-up</span>
                        <i class="fas fa-clock"></i>
                    </div>

                    <div class="preseason-grid">
                        <div class="preseason-column">
                            <h3>6:30 PM Game</h3>
                            <div class="player-list" id="game1Players"></div>
                        </div>
                        <div class="preseason-column">
                            <h3>7:30 PM Game</h3>
                            <div class="player-list" id="game2Players"></div>
                        </div>
                        <div class="preseason-column">
                            <h3>8:30 PM Game</h3>
                            <div class="player-list" id="game3Players"></div>
                        </div>
                    </div>
                </div>
            </div>

        <!-- Admin Login Modal -->
        <div id="adminLogin" class="admin-login">
            <h3><i class="fas fa-lock"></i> Admin Access</h3>
            <p>Enter password to access admin panel</p>
            <input type="password" id="adminPassword" placeholder="Password" onkeypress="handleEnterKey(event)">
            <button class="btn" onclick="checkAdminPassword()">Login</button>
            <button class="btn btn-danger" onclick="closeAdminLogin()">Cancel</button>
        </div>

        <!-- Hidden Admin Trigger -->
        <button class="admin-trigger" onclick="showAdminLogin()" title="Admin Access">
            <i class="fas fa-key"></i>
        </button>
    </div>

	<!-- Playoffs Section -->
		<div id="playoffs" class="content-section">
    <div class="card-base" style="max-width: 800px; margin: 0 auto;">
        <h2><i class="fas fa-trophy"></i> Playoffs</h2>
        <div class="schedule-grid">
            <div class="game-card">
                <div class="game-header">
                    <span class="game-date">Playoff Schedule Coming Soon</span>
                </div>
                <div class="game-location">
                    Magna Centre - Court A
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>